<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 30: Mapped Types - TypeScript Learning Path</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        primary: '#3b82f6',
                        secondary: '#8b5cf6',
                        accent: '#06b6d4',
                    }
                }
            }
        }
    </script>
    <style>
        .code-block { @apply bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto font-mono text-sm; }
        .keyword { @apply text-purple-400; }
        .type { @apply text-yellow-400; }
        .string { @apply text-green-400; }
        .comment { @apply text-gray-500; }
        .function { @apply text-blue-400; }
        .progress-bar { @apply h-2 bg-gray-200 rounded-full overflow-hidden; }
        .progress-fill { @apply h-full bg-gradient-to-r from-primary to-accent transition-all duration-500; }
        .lesson-nav { @apply flex items-center justify-between p-4 bg-white rounded-lg shadow-sm border border-gray-200; }
        .nav-btn { @apply px-4 py-2 rounded-lg font-medium transition-colors; }
        .nav-btn:hover { @apply bg-gray-100; }
        .nav-btn:disabled { @apply opacity-50 cursor-not-allowed; }
        .nav-btn.primary { @apply bg-primary text-white hover:bg-blue-600; }
        .quiz-option { @apply p-3 border-2 rounded-lg cursor-pointer transition-all hover:border-primary hover:bg-blue-50; }
        .quiz-option.selected { @apply border-primary bg-blue-50; }
        .quiz-option.correct { @apply border-green-500 bg-green-50; }
        .quiz-option.incorrect { @apply border-red-500 bg-red-50; }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-50 to-blue-50 min-h-screen">
    <!-- Progress Bar -->
    <div class="fixed top-0 left-0 right-0 bg-white border-b border-gray-200 z-50">
        <div class="max-w-4xl mx-auto px-4 py-3">
            <div class="flex items-center justify-between mb-2">
                <span class="text-sm font-medium text-gray-700">Modul 5: Advanced Types</span>
                <span class="text-sm font-medium text-gray-700" id="progress-text">Lesson 30 of 40</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill" style="width: 75%"></div>
            </div>
        </div>
    </div>

    <main class="max-w-4xl mx-auto px-4 py-8 mt-16">
        <!-- Lesson Header -->
        <div class="bg-white rounded-2xl shadow-lg p-8 mb-8">
            <div class="flex items-center gap-3 mb-4">
                <span class="bg-primary text-white px-3 py-1 rounded-full text-sm font-medium">Modul 5</span>
                <span class="bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm font-medium">Lesson 30</span>
            </div>
            <h1 class="text-3xl font-bold text-gray-900 mb-4">Mapped Types</h1>
            <p class="text-gray-600 leading-relaxed mb-6">
                <strong>Mapped types</strong> memungkinkan kita membuat tipe baru dengan <em>mengiterasi (mapping)</em> properti dari tipe yang sudah ada. 
                Ini adalah salah satu fitur paling powerful untuk membuat utility types seperti <code>Readonly</code>, <code>Partial</code>, <code>Pick</code>, dll.
            </p>
            <div class="flex items-center gap-4 text-sm text-gray-500">
                <span>‚è±Ô∏è 20 menit</span>
                <span>üìä Kesulitan: Tinggi</span>
                <span>üéØ Tujuan: Pahami cara membuat tipe berdasarkan tipe lain</span>
            </div>
        </div>

        <!-- Section 1: Sintaks Dasar -->
        <section class="bg-white rounded-xl shadow-md p-6 mb-6">
            <h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
                <span class="bg-primary text-white w-8 h-8 rounded-full flex items-center justify-center text-sm">1</span>
                Sintaks Dasar
            </h2>
            <p class="text-gray-700 mb-4">
                Mapped types menggunakan syntax <code class="font-mono text-primary">{ [P in K]: T }</code> di mana:
            </p>
            <ul class="list-disc list-inside space-y-2 text-gray-700 mb-4">
                <li><code>P</code> adalah variabel yang akan di-iterate (biasanya <code>key</code> atau <code>K</code>)</li>
                <li><code>K</code> adalah <em>key union</em> (jenis properti yang akan diambil dari tipe asli)</li>
                <li><code>T</code> adalah tipe untuk properti tersebut</li>
            </ul>
            <div class="code-block mb-4">
<span class="comment">// Contoh: buat tipe dengan semua properti menjadi optional</span>
<span class="keyword">type</span> <span class="type">Partial</span>&lt;T&gt; = {
    [P <span class="keyword">in</span> <span class="keyword">keyof</span> T]?: T[P];
};

<span class="keyword">interface</span> <span class="type">User</span> {
    name: <span class="type">string</span>;
    age: <span class="type">number</span>;
    email: <span class="type">string</span>;
}

<span class="keyword">type</span> <span class="type">PartialUser</span> = <span class="function">Partial</span>&lt;<span class="type">User</span>&gt;;
<span class="comment">// Sama dengan:</span>
<span class="comment">// { name?: string; age?: number; email?: string; }</span>
            </div>
        </section>

        <!-- Section 2: Keyof Operator -->
        <section class="bg-white rounded-xl shadow-md p-6 mb-6">
            <h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
                <span class="bg-secondary text-white w-8 h-8 rounded-full flex items-center justify-center text-sm">2</span>
                Keyof Operator
            </h2>
            <p class="text-gray-700 mb-4">
                Sebelum mapped types, kita perlu memahami <code>keyof</code>. Operator <code>keyof</code> menghasilkan <strong>union of literal types</strong> dari nama properti sebuah tipe.
            </p>
            <div class="code-block mb-4">
<span class="keyword">interface</span> <span class="type">Point</span> {
    x: <span class="type">number</span>;
    y: <span class="type">number</span>;
}

<span class="keyword">type</span> <span class="type">PointKeys</span> = <span class="keyword">keyof</span> <span class="type">Point</span>; <span class="comment">// "x" | "y"</span>

<span class="comment">// Bisa digunakan dalam mapped type:</span>
<span class="keyword">type</span> <span class="type">WritableKeys</span>&lt;T&gt; = {
    [P <span class="keyword">in</span> <span class="keyword">keyof</span> T]-?: T[P]; <span class="comment">// -? menghapus optional (membuat required)</span>
};
            </div>
        </section>

        <!-- Section 3: Built-in Utility Types -->
        <section class="bg-white rounded-xl shadow-md p-6 mb-6">
            <h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
                <span class="bg-accent text-white w-8 h-8 rounded-full flex items-center justify-center text-sm">3</span>
                Built-in Utility Types (TypeScript Std)
            </h2>
            <p class="text-gray-700 mb-4">
                TypeScript sudah menyertakan banyak utility types yang dibuat dengan mapped types. Mari kita lihat beberapa yang paling sering digunakan:
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-gray-900 mb-2"><code>Partial&lt;T&gt;</code></h4>
                    <p class="text-sm text-gray-700">Membuat semua properti menjadi optional.</p>
                    <code class="text-xs text-gray-600 block mt-2">{ [P in keyof T]?: T[P] }</code>
                </div>
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-gray-900 mb-2"><code>Required&lt;T&gt;</code></h4>
                    <p class="text-sm text-gray-700">Membuat semua properti menjadi required.</p>
                    <code class="text-xs text-gray-600 block mt-2">{ [P in keyof T]-?: T[P] }</code>
                </div>
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-gray-900 mb-2"><code>Readonly&lt;T&gt;</code></h4>
                    <p class="text-sm text-gray-700">Membuat semua properti readonly.</p>
                    <code class="text-xs text-gray-600 block mt-2">{ readonly [P in keyof T]: T[P] }</code>
                </div>
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-gray-900 mb-2"><code>Pick&lt;T, K&gt;</code></h4>
                    <p class="text-sm text-gray-700">Pilih subset properti dari T.</p>
                    <code class="text-xs text-gray-600 block mt-2">{ [P in K]: T[P] }</code>
                </div>
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-gray-900 mb-2"><code>Omit&lt;T, K&gt;</code></h4>
                    <p class="text-sm text-gray-700">Kecualikan (remove) properti K dari T.</p>
                    <code class="text-xs text-gray-600 block mt-2">{ [P in Exclude&lt;keyof T, K&gt;]: T[P] }</code>
                </div>
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-gray-900 mb-2"><code>Record&lt;K, T&gt;</code></h4>
                    <p class="text-sm text-gray-700">Buat tipe dengan keys K (union) dan values bertipe T.</p>
                    <code class="text-xs text-gray-600 block mt-2">{ [P in K]: T }</code>
                </div>
            </div>
        </section>

        <!-- Section 4: Contoh Praktis -->
        <section class="bg-white rounded-xl shadow-md p-6 mb-6">
            <h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
                <span class="bg-green-500 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm">4</span>
                Contoh Praktis
            </h2>
            <div class="code-block mb-4">
<span class="comment">// 1. Buat tipe dengan semua properti string</span>
<span class="keyword">type</span> <span class="type">StringifyAll</span>&lt;T&gt; = {
    [P <span class="keyword">in</span> <span class="keyword">keyof</span> T]: <span class="type">string</span>;
};

<span class="comment">// 2. Buat tipe dengan properti nullable (bisa null)</span>
<span class="keyword">type</span> <span class="type">Nullable</span>&lt;T&gt; = {
    [P <span class="keyword">in</span> <span class="keyword">keyof</span> T]: T[P] | <span class="keyword">null</span>;
};

<span class="comment">// 3. Buat tipe dengan prefix pada semua keys</span>
<span class="keyword">type</span> <span class="type">Prefixed</span>&lt;T, Prefix <span class="keyword">extends</span> <span class="type">string</span>&gt; = {
    [P <span class="keyword">in</span> <span class="keyword">keyof</span> T as <span class="string">`${Prefix}-${P & string}`</span>]: T[P];
};

<span class="comment">// 4. Hanya properti dengan tipe tertentu (filter)</span>
<span class="keyword">type</span> <span class="type">FunctionProperties</span>&lt;T&gt; = {
    [P <span class="keyword">in</span> <span class="keyword">keyof</span> T <span class="keyword">as</span> T[P] <span class="keyword">extends</span> <span class="function">Function</span> ? P : <span class="keyword">never</span>]: T[P];
};
            </div>
        </section>

        <!-- Section 5: Modifikasi Keys dengan 'as' -->
        <section class="bg-white rounded-xl shadow-md p-6 mb-6">
            <h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
                <span class="bg-purple-500 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm">5</span>
                Remapping Keys dengan <code>as</code>
            </h2>
            <p class="text-gray-700 mb-4">
                TypeScript 4.1+ memungkinkan kita <strong>remap</strong> nama properti menggunakan clause <code>as</code> di mapped types.
            </p>
            <div class="code-block mb-4">
<span class="comment">// Contoh: ubah semua properti menjadi camelCase (sederhana)</span>
<span class="keyword">type</span> <span class="type">CamelCase</span>&lt;T&gt; = {
    [P <span class="keyword">in</span> <span class="keyword">keyof</span> T <span class="keyword">as</span> <span class="function">Camel</span>&lt;P & <span class="type">string</span>&gt;]: T[P];
};

<span class="comment">// Helper untuk konversi snake_case ke camelCase (simulasi)</span>
<span class="keyword">type</span> <span class="function">Camel</span>&lt;S <span class="keyword">extends</span> <span class="type">string</span>&gt; = S extends <span class="string">`${infer Head}-${infer Tail}`</span> 
    ? <span class="string">`${Head}${Capitalize&lt;Camel&lt;Tail&gt;&gt;}`</span> 
    : S;

<span class="comment">// Contoh penggunaan Record dengan prefixed keys</span>
<span class="keyword">type</span> <span class="type">PrefixedRecord</span>&lt;T, Prefix <span class="keyword">extends</span> <span class="type">string</span>&gt; = {
    [P <span class="keyword">in</span> <span class="keyword">keyof</span> T <span class="keyword">as</span> <span class="string">`${Prefix}-${P & string}`</span>]: T[P];
};
            </div>
        </section>

        <!-- Section 6: Template Literal Types + Mapped -->
        <section class="bg-white rounded-xl shadow-md p-6 mb-6">
            <h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
                <span class="bg-red-500 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm">6</span>
            </h2>
            <p class="text-gray-700 mb-4">
                Mapped types sering digabung dengan <strong>template literal types</strong> untuk membuat pola nama properti yang kompleks.
            </p>
            <div class="code-block mb-4">
<span class="comment">// Contoh: buat tipe untuk event handlers</span>
<span class="keyword">type</span> <span class="type">EventMap</span> = {
    <span class="string">"click"</span>: { x: <span class="type">number</span>; y: <span class="type">number</span> };
    <span class="string">"keydown"</span>: { key: <span class="type">string</span>; ctrl: <span class="type">boolean</span> };
};

<span class="comment">// Otomatis buat handler types: onClick, onKeydown</span>
<span class="keyword">type</span> <span class="type">Handlers</span> = {
    [E <span class="keyword">in</span> <span class="keyword">keyof</span> <span class="type">EventMap</span> <span class="keyword">as</span> <span class="string">`on${Capitalize&lt;E & string&gt;}`</span>]: (e: <span class="type">EventMap</span>[E]) =&gt; <span class="keyword">void</span>;
};

<span class="comment">// Hasil:</span>
<span class="comment">// { onClick: (e: {x:number; y:number}) => void; onKeydown: (e: {key:string; ctrl:boolean}) => void; }</span>
            </div>
            <p class="text-gray-700">
                Kombinasi mapped types + template literal types sangat powerful untuk membuat API yang konsisten dan otomatis.
            </p>
        </section>

        <!-- Quiz -->
        <section class="bg-white rounded-xl shadow-md p-6 mb-8">
            <h2 class="text-xl font-bold text-gray-900 mb-4">‚úÖ Quick Quiz</h2>
            <div class="space-y-4">
                <div class="quiz-question" data-question="1">
                    <p class="font-medium text-gray-900 mb-3">1. Apa yang dilakukan mapped type <code>{ [P in keyof T]: T[P] }</code>?</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                        <button class="quiz-option" data-correct="false">Menghapus semua properti dari T</button>
                        <button class="quiz-option" data-correct="true">Membuat tipe baru dengan semua properti dari T (salinan)</button>
                        <button class="quiz-option" data-correct="false">Menggabungkan T dengan tipe lain</button>
                        <button class="quiz-option" data-correct="false">Mengubah tipe T menjadi any</button>
                    </div>
                </div>
                <div class="quiz-question" data-question="2">
                    <p class="font-medium text-gray-900 mb-3">2. Apa fungsi <code>-?</code> setelah <code>in keyof T</code>?</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                        <button class="quiz-option" data-correct="false">Membuat properti menjadi readonly</button>
                        <button class="quiz-option" data-correct="true">Menghapus modifier optional (membuat required)</button>
                        <button class="quiz-option" data-correct="false">Membuat properti menjadi nullable</button>
                        <button class="quiz-option" data-correct="false">Menambahkan prefix pada nama properti</button>
                    </div>
                </div>
                <div class="quiz-question" data-question="3">
                    <p class="font-medium text-gray-900 mb-3">3. Apa yang dilakukan <code>as</code> clause dalam mapped type?</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                        <button class="quiz-option" data-correct="false">Mengubah tipe nilai properti</button>
                        <button class="quiz-option" data-correct="true">Mengubah (remap) nama properti menjadi nama lain</button>
                        <button class="quiz-option" data-correct="false">Menambahkan type assertion</button>
                        <button class="quiz-option" data-correct="false">Menggabungkan dua mapped type</button>
                    </div>
                </div>
            </div>
            <div id="quiz-feedback" class="mt-4 p-4 rounded-lg hidden"></div>
            <button id="check-answers" class="mt-4 px-6 py-2 bg-primary text-white rounded-lg font-medium hover:bg-blue-600 transition-colors">
                Periksa Jawaban
            </button>
        </section>

        <!-- Module Completion Banner -->
        <div class="bg-gradient-to-r from-green-50 to-blue-50 border-2 border-green-500 rounded-xl p-8 text-center mb-8">
            <div class="text-5xl mb-4">üéì</div>
            <h2 class="text-2xl font-bold text-green-900 mb-2">Modul 5: Advanced Types - SELESAI!</h2>
            <p class="text-green-800 mb-4">
                Selamat! Anda telah menyelesaikan semua 5 lesson di Modul 5. 
                Anda sekarang menguasai Union, Intersection, Type Guards, Type Assertions, 
                Type Aliases vs Interfaces, Conditional Types, dan Mapped Types.
            </p>
            <div class="flex justify-center gap-4">
                <button class="px-6 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors" onclick="markComplete()">
                    Lanjut ke Modul Berikutnya ‚Üí
                </button>
            </div>
        </div>

        <!-- Navigation -->
        <nav class="lesson-nav">
            <button class="nav-btn" id="prev-lesson" onclick="window.location.href='lesson-29-conditional-types.html'">
                ‚Üê Previous
            </button>
            <div class="text-center">
                <span class="text-gray-600">Lesson </span>
                <span class="font-bold text-gray-900" id="current-lesson">30</span>
                <span class="text-gray-600"> of 40</span>
            </div>
            <button class="nav-btn primary" id="next-lesson" disabled>
                Next ‚Üí
            </button>
        </nav>

        <!-- Completion Message -->
        <div id="completion-banner" class="hidden mt-6 bg-green-50 border-2 border-green-500 rounded-xl p-6 text-center">
            <div class="text-4xl mb-3">üéâ</div>
            <h3 class="text-xl font-bold text-green-900 mb-2">Lesson 30 Complete!</h3>
            <p class="text-green-800 mb-4">You've mastered Mapped Types and completed Modul 5!</p>
        </div>
    </main>

    <script>
        let lessonCompleted = localStorage.getItem('lesson-30-completed') === 'true';
        let progress = 75; // 30/40 = 75%
        let currentLessonNum = 30;
        let totalLessons = 65;

        function updateProgress() {
            const percent = (progress / totalLessons) * 100;
            document.getElementById('progress-fill').style.width = percent + '%';
            document.getElementById('progress-text').textContent = `Lesson ${currentLessonNum} of ${totalLessons}`;
        }

        const quizAnswers = {};
        document.querySelectorAll('.quiz-option').forEach(btn => {
            btn.addEventListener('click', function() {
                const question = this.closest('.quiz-question');
                const qNum = question.dataset.question;
                question.querySelectorAll('.quiz-option').forEach(opt => {
                    opt.classList.remove('selected', 'correct', 'incorrect');
                });
                this.classList.add('selected');
                quizAnswers[qNum] = this.dataset.correct === 'true';
            });
        });

        document.getElementById('check-answers').addEventListener('click', function() {
            let allCorrect = true;
            document.querySelectorAll('.quiz-question').forEach(question => {
                const qNum = question.dataset.question;
                const selected = question.querySelector('.selected');
                if (!selected) {
                    allCorrect = false;
                    return;
                }
                const isCorrect = quizAnswers[qNum];
                if (isCorrect) {
                    selected.classList.add('correct');
                } else {
                    selected.classList.add('incorrect');
                    allCorrect = false;
                }
            });
            const feedback = document.getElementById('quiz-feedback');
            feedback.classList.remove('hidden');
            if (allCorrect) {
                feedback.className = 'mt-4 p-4 rounded-lg bg-green-50 border-2 border-green-500';
                feedback.innerHTML = `
                    <div class="flex items-center gap-2 text-green-800">
                        <span class="text-2xl">‚úÖ</span>
                        <div>
                            <p class="font-bold">Semua benar!</p>
                            <p class="text-sm">Modul 5 selesai! Lanjutkan ke modul berikutnya.</p>
                        </div>
                    </div>
                `;
                document.getElementById('completion-banner').classList.remove('hidden');
                lessonCompleted = true;
                localStorage.setItem('lesson-30-completed', 'true');
                progress += 1;
                updateProgress();
            } else {
                feedback.className = 'mt-4 p-4 rounded-lg bg-yellow-50 border-2 border-yellow-500';
                feedback.innerHTML = `
                    <div class="flex items-center gap-2 text-yellow-800">
                        <span class="text-2xl">‚ö†Ô∏è</span>
                        <div>
                            <p class="font-bold">Beberapa jawaban belum tepat</p>
                            <p class="text-sm">Coba periksa kembali dan pilih jawaban yang benar.</p>
                        </div>
                    </div>
                `;
            }
        });

        function markComplete() {
            alert('Modul 5 selesai! Silakan lanjut ke modul berikutnya di dashboard.');
            // Window location bisa diarahkan ke halaman modul berikutnya
        }

        updateProgress();
        if (lessonCompleted) {
            document.getElementById('completion-banner').classList.remove('hidden');
        }
    </script>
</body>
</html>
